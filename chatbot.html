<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Helvitic AI Chatbot</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .message-bot { background:#f1f5f9; color:#111827; text-align:left; }
    .message-user { background:#2563eb; color:white; text-align:right; }
    .glass-effect { background:rgba(255,255,255,0.85); backdrop-filter:blur(10px); }
    .faq-btn { background:#e5e7eb; padding:6px 10px; border-radius:8px; cursor:pointer; }
    .faq-btn:hover { background:#d1d5db; }
  </style>
</head>
<body class="h-screen w-full">

<!-- FenÃªtre du chatbot -->
<div id="chatbot-window" class="w-full h-screen glass-effect flex flex-col">

  <!-- Header -->
  <div class="gradient-bg bg-blue-600 text-white flex justify-between items-center p-4">
    <span class="font-bold">Helvitic AI</span>

    <div class="flex items-center gap-2">
      <select id="lang-select" class="text-black rounded px-2 py-1">
        <option value="fr">ðŸ‡«ðŸ‡· FR</option>
        <option value="en">ðŸ‡¬ðŸ‡§ EN</option>
        <option value="de">ðŸ‡©ðŸ‡ª DE</option>
      </select>
      <button onclick="parent.closeChatbot()" class="ml-2 text-lg font-bold">âœ•</button>
    </div>
  </div>

  <!-- Messages -->
  <div id="chatbot-messages" class="flex-1 overflow-y-auto p-4 space-y-3 scrollbar-thin"></div>

  <!-- FAQ -->
  <div id="faq-questions" class="border-t border-gray-300 p-3 flex flex-wrap gap-2 text-sm"></div>

  <!-- Formulaire -->
  <form id="bot-form" class="border-t border-gray-200 p-3 flex">
    <input id="bot-input" type="text" placeholder="Ã‰crivez ici..." 
           class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
    <button class="ml-2 px-4 bg-blue-600 text-white rounded-lg">Envoyer</button>
  </form>
</div>

<script>
/* === RÃ©ponses multilingues === */
const responses = {
  fr: { 
    welcome:"Bonjour ðŸ‘‹ Je suis le chatbot Helvitic AI. Posez-moi vos questions.",
    greeting:"Bonjour! Comment puis-je vous aider ?",
    services:"Nous offrons des solutions IA pour la gestion financiÃ¨re, lâ€™optimisation et la formation.",
    contact:"Vous pouvez nous contacter via email : helviticaich@gmail.com.",
    goodbye:"Merci pour votre visite ! Ã€ bientÃ´t ðŸ‘‹",
    unknown:"DÃ©solÃ©, je n'ai pas compris. Pouvez-vous prÃ©ciser ?" 
  },
  en: {
    welcome:"Hello ðŸ‘‹ I'm the Helvitic AI chatbot. Ask me anything.",
    greeting:"Hello! How can I help?",
    services:"We provide AI solutions for financial management, optimization, and training.",
    contact:"You can reach us via email: helviticaich@gmail.com.",
    goodbye:"Thank you for visiting! See you soon ðŸ‘‹",
    unknown:"Sorry, I didn't understand. Could you clarify?"
  },
  de: {
    welcome:"Hallo ðŸ‘‹ Ich bin der Helvitic AI Chatbot. Stellen Sie mir Ihre Fragen.",
    greeting:"Hallo! Wie kann ich Ihnen helfen?",
    services:"Wir bieten KI-LÃ¶sungen fÃ¼r Finanzmanagement, Optimierung und Schulungen.",
    contact:"Sie erreichen uns per E-Mail: helviticaich@gmail.com.",
    goodbye:"Danke fÃ¼r Ihren Besuch! Bis bald ðŸ‘‹",
    unknown:"Entschuldigung, das habe ich nicht verstanden. KÃ¶nnen Sie das bitte prÃ¤zisieren?"
  }
};

let currentLang = "fr"; // langue par dÃ©faut

// SÃ©lecteurs
const botForm = document.getElementById("bot-form");
const botInput = document.getElementById("bot-input");
const botMessages = document.getElementById("chatbot-messages");
const langSelect = document.getElementById("lang-select");

// Fonction affichage message
function addMessage(sender, text) {
  const div = document.createElement("div");
  div.className = sender === "bot" 
    ? "message-bot px-3 py-2 rounded-lg" 
    : "message-user px-3 py-2 rounded-lg text-right";
  div.innerHTML = `<strong>${sender==="bot"?"Bot":"Vous"}:</strong> ${text}`;
  botMessages.appendChild(div);
  botMessages.scrollTop = botMessages.scrollHeight;
}

// Message de bienvenue
function showWelcomeMessage() {
  botMessages.innerHTML = "";
  addMessage("bot", responses[currentLang].welcome);
}

// RÃ©ponses
botForm.addEventListener("submit", (e) => {
  e.preventDefault();
  const msg = botInput.value.trim().toLowerCase();
  if (!msg) return;
  addMessage("user", msg);
  botInput.value = "";

  let reply = responses[currentLang].unknown;
  if (msg.includes("bonjour")||msg.includes("hello")||msg.includes("hallo")) reply = responses[currentLang].greeting;
  else if (msg.includes("service")) reply = responses[currentLang].services;
  else if (msg.includes("contact")) reply = responses[currentLang].contact;
  else if (msg.includes("bye")||msg.includes("au revoir")||msg.includes("tschÃ¼ss")) reply = responses[currentLang].goodbye;

  addMessage("bot", reply);
});

// === FAQ dynamique ===
function updateFAQ() {
  const faqContainer = document.getElementById("faq-questions");
  faqContainer.innerHTML = ""; // reset
  
  const faqList = {
    fr: ["Quels services proposez-vous ?", "Comment vous contacter ?", "Quels sont les avantages de lâ€™IA ?"],
    en: ["What services do you offer?", "How can I contact you?", "What are the benefits of AI?"],
    de: ["Welche Dienstleistungen bieten Sie an?", "Wie kann ich Sie kontaktieren?", "Was sind die Vorteile von KI?"]
  };

  faqList[currentLang].forEach(q => {
    const btn = document.createElement("button");
    btn.className = "faq-btn";
    btn.innerText = q;
    btn.addEventListener("click", () => {
      addMessage("user", q);

      let reply = responses[currentLang].unknown;
      if (q.toLowerCase().includes("service") || q.toLowerCase().includes("dienst")) reply = responses[currentLang].services;
      else if (q.toLowerCase().includes("contact") || q.toLowerCase().includes("kontakt")) reply = responses[currentLang].contact;
      else if (q.toLowerCase().includes("avantage") || q.toLowerCase().includes("benefit") || q.toLowerCase().includes("vorteil")) {
        reply = {
          fr: "Lâ€™IA permet dâ€™automatiser, prÃ©dire et optimiser la performance financiÃ¨re ðŸš€",
          en: "AI helps automate, predict, and optimize financial performance ðŸš€",
          de: "KI hilft, die finanzielle Leistung zu automatisieren, vorherzusagen und zu optimieren ðŸš€"
        }[currentLang];
      }

      addMessage("bot", reply);
    });
    faqContainer.appendChild(btn);
  });
}

// Changement de langue
langSelect.addEventListener("change", () => {
  currentLang = langSelect.value;
  showWelcomeMessage();
  updateFAQ();
});

// Lancer avec message dâ€™accueil
showWelcomeMessage();
updateFAQ();
</script>
</body>
</html>
