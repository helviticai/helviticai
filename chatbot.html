<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helvetic AI Chatbot</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
  
  * {
    font-family: 'Inter', sans-serif;
  }

  #questions-container {
    max-height: 200px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: #e2e8f0 transparent;
  }
  
  #questions-container::-webkit-scrollbar {
    width: 6px;
  }
  
  #questions-container::-webkit-scrollbar-track {
    background: transparent;
  }
  
  #questions-container::-webkit-scrollbar-thumb {
    background: linear-gradient(45deg, #60a5fa, #3b82f6);
    border-radius: 10px;
  }

  .glass-effect {
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  }
  
  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    position: relative;
    overflow: hidden;
  }
  
  .gradient-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    animation: shimmer 3s infinite;
  }
  
  @keyframes shimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }
  
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: #e2e8f0 #f8fafc;
  }
  
  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-track {
    background: #f8fafc;
    border-radius: 10px;
  }
  
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: linear-gradient(45deg, #60a5fa, #3b82f6);
    border-radius: 10px;
    border: 2px solid #f8fafc;
  }
  
  .typing-indicator {
    display: flex;
    padding: 12px 20px;
    background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
    border-radius: 20px;
    width: fit-content;
    margin: 8px 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }
  
  .typing-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: linear-gradient(45deg, #6366f1, #8b5cf6);
    animation: typing 1.6s infinite;
    margin-right: 6px;
  }
  
  .typing-dot:nth-child(2) { animation-delay: 0.2s; }
  .typing-dot:nth-child(3) { animation-delay: 0.4s; margin-right: 0; }
  
  @keyframes typing {
    0%, 60%, 100% { 
      transform: translateY(0) scale(1); 
      opacity: 0.4; 
    }
    30% { 
      transform: translateY(-12px) scale(1.1); 
      opacity: 1; 
    }
  }
  
  .message-fade-in {
    animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  
  @keyframes fadeInUp {
    from { 
      opacity: 0; 
      transform: translateY(20px) scale(0.95); 
    }
    to { 
      opacity: 1; 
      transform: translateY(0) scale(1); 
    }
  }
  
  .question-btn {
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border: 1px solid transparent;
    background: linear-gradient(135deg, #ffffff, #f8fafc);
    position: relative;
    overflow: hidden;
  }
  
  .question-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
    transition: left 0.6s ease;
  }
  
  .question-btn:hover::before {
    left: 100%;
  }
  
  .question-btn:hover {
    border-color: #6366f1;
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
    background: linear-gradient(135deg, #ffffff, #f0f9ff);
  }
  
  .toggle-btn {
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    color: white;
    border-radius: 25px;
    position: relative;
    overflow: hidden;
  }
  
  .toggle-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
  }
  
  .toggle-btn:hover::before {
    width: 300px;
    height: 300px;
  }
  
  .toggle-btn:hover {
    transform: translateY(-1px) scale(1.05);
    box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
  }
  
  .message-bubble-bot {
    background: linear-gradient(135deg, #ffffff, #f8fafc);
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    position: relative;
  }
  
  .message-bubble-bot::before {
    content: '';
    position: absolute;
    top: -1px;
    left: -1px;
    right: -1px;
    bottom: -1px;
    background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
    border-radius: inherit;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .message-bubble-user {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
    position: relative;
    overflow: hidden;
  }
  
  .message-bubble-user::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    animation: messageShimmer 2s infinite;
  }
  
  @keyframes messageShimmer {
    0% { left: -100%; }
    100% { left: 100%; }
  }
  
  .logo-container {
    background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.1));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.3);
    transition: all 0.3s ease;
  }
  
  .logo-container:hover {
    transform: rotate(5deg) scale(1.1);
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
  }
  
  .status-pulse {
    position: relative;
  }
  
  .status-pulse::before {
    content: '';
    position: absolute;
    top: 50%;
    left: -8px;
    width: 8px;
    height: 8px;
    background: #10b981;
    border-radius: 50%;
    transform: translateY(-50%);
    animation: pulse 2s infinite;
  }
  
  @keyframes pulse {
    0% {
      transform: translateY(-50%) scale(1);
      opacity: 1;
    }
    50% {
      transform: translateY(-50%) scale(1.2);
      opacity: 0.7;
    }
    100% {
      transform: translateY(-50%) scale(1);
      opacity: 1;
    }
  }
  
  .lang-select {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    transition: all 0.3s ease;
  }
  
  .lang-select:hover {
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }
  
  .close-btn {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
  }
  
  .close-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg) scale(1.1);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  }
  
  .chat-background {
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    position: relative;
  }
  
  .chat-background::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: 
      radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.05) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.05) 0%, transparent 50%);
    pointer-events: none;
  }

  /* Ajout d'une animation pour l'effacement des messages */
  .messages-clearing {
    animation: fadeOutMessages 0.3s ease-out forwards;
  }
  
  @keyframes fadeOutMessages {
    from { 
      opacity: 1; 
      transform: scale(1);
    }
    to { 
      opacity: 0; 
      transform: scale(0.95);
    }
  }
</style>
</head>
<body>

<!-- FenÃªtre du chatbot -->
<div id="chatbot-window" class="w-full h-screen glass-effect flex flex-col relative overflow-hidden">
  <!-- Header -->
  <div class="gradient-bg text-white flex justify-between items-center p-4 shadow-2xl relative z-10">
    <div class="flex items-center space-x-4">
      <div class="logo-container w-10 h-10 rounded-full flex items-center justify-center overflow-hidden">
        <svg width="24" height="24" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" fill="#FF0000" rx="4"/>
          <rect x="6" y="13" width="20" height="6" fill="#FFFFFF" rx="1"/>
          <rect x="13" y="6" width="6" height="20" fill="#FFFFFF" rx="1"/>
        </svg>
      </div>
      <div>
        <span class="font-bold text-lg">Helvetic AI</span>
        <div class="text-sm opacity-90 status-pulse pl-3" id="status-indicator">En ligne</div>
      </div>
    </div>
    <div class="flex items-center space-x-3">
      <div class="relative">
        <select id="lang-select" class="lang-select text-gray-800 rounded-lg px-4 py-2 text-sm font-medium appearance-none pr-8 focus:outline-none focus:ring-2 focus:ring-white/50">
          <option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
          <option value="en">ðŸ‡¬ðŸ‡§ English</option>
          <option value="de">ðŸ‡©ðŸ‡ª Deutsch</option>
        </select>
        <div class="absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none">
          <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
        </div>
      </div>
      <button onclick="parent.closeChatbot()" class="close-btn w-8 h-8 rounded-full flex items-center justify-center text-lg font-bold">
        Ã—
      </button>
    </div>
  </div>

  <!-- Messages -->
  <div id="chatbot-messages" class="flex-1 overflow-y-auto p-6 space-y-4 scrollbar-thin chat-background"></div>

  <!-- Questions rapides -->
  <div class="border-t border-gray-200 bg-white/80 backdrop-blur-sm p-6">
    <div class="text-sm font-semibold text-gray-700 mb-4 flex items-center" id="questions-title">
      <svg class="w-4 h-4 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
      </svg>
      Questions rapides :
    </div>
    <div id="questions-container" class="space-y-3"></div>
  </div>
</div>

<!-- Scripts -->
<script>
const quickQuestions = {
  fr: [
    "Qu'est-ce que l'IA en finance ?",
    "Quels sont les avantages de l'IA pour l'EPM ?",
    "Comment intÃ©grer l'IA dans mon systÃ¨me ?",
    "Quel est le ROI de l'IA en finance ?",
    "Quelles technologies IA utilisez-vous ?",
    "Combien coÃ»te une implÃ©mentation IA ?",
    "L'IA peut-elle amÃ©liorer mes prÃ©visions ?",
    "Comment assurer la sÃ©curitÃ© des donnÃ©es ?"
  ],
  en: [
    "What is AI in finance?",
    "What are the benefits of AI for EPM?",
    "How to integrate AI in my system?",
    "What is the ROI of AI in finance?",
    "What AI technologies do you use?",
    "How much does AI implementation cost?",
    "Can AI improve my forecasts?",
    "How to ensure data security?"
  ],
  de: [
    "Was ist KI im Finanzwesen?",
    "Was sind die Vorteile von KI fÃ¼r EPM?",
    "Wie integriere ich KI in mein System?",
    "Was ist der ROI von KI im Finanzwesen?",
    "Welche KI-Technologien verwenden Sie?",
    "Wie viel kostet eine KI-Implementierung?",
    "Kann KI meine Prognosen verbessern?",
    "Wie stelle ich Datensicherheit sicher?"
  ]
};

const translations = {
  fr: {
    typing: "En train d'Ã©crire...",
    online: "En ligne",
    questionsTitle: "Questions rapides :",
    seeMore: "Voir plus",
    seeLess: "Voir moins",
    welcome: "Bonjour ! Je suis votre assistant IA Helvetic. Choisissez une question ci-dessous pour commencer."
  },
  en: {
    typing: "Typing...",
    online: "Online",
    questionsTitle: "Quick questions:",
    seeMore: "See more",
    seeLess: "See less",
    welcome: "Hello! I'm your Helvetic AI assistant. Choose a question below to get started."
  },
  de: {
    typing: "Schreibt...",
    online: "Online",
    questionsTitle: "Schnellfragen:",
    seeMore: "Mehr anzeigen",
    seeLess: "Weniger anzeigen",
    welcome: "Hallo! Ich bin Ihr Helvetic AI Assistent. WÃ¤hlen Sie eine Frage unten aus, um zu beginnen."
  }
};

// RÃ©ponses spÃ©cifiques par question et langue
const responses = {
  fr: {
    "Qu'est-ce que l'IA en finance ?": "L'IA en finance transforme la gestion financiÃ¨re en automatisant l'analyse de donnÃ©es, la dÃ©tection de fraudes, et l'optimisation des investissements. Elle permet une prise de dÃ©cision plus rapide et prÃ©cise.",
    "Quels sont les avantages de l'IA pour l'EPM ?": "L'IA rÃ©volutionne l'EPM (Enterprise Performance Management) en automatisant les prÃ©visions budgÃ©taires, optimisant les analyses de variance, et fournissant des insights prÃ©dictifs en temps rÃ©el pour amÃ©liorer la performance d'entreprise.",
    "Comment intÃ©grer l'IA dans mon systÃ¨me ?": "Notre processus d'intÃ©gration comprend : 1) Audit de votre infrastructure, 2) Personnalisation des modÃ¨les IA, 3) Migration progressive, 4) Formation des Ã©quipes, et 5) Support continu pour assurer une transition fluide.",
    "Quel est le ROI de l'IA en finance ?": "Nos clients observent en moyenne : 35% de rÃ©duction des coÃ»ts opÃ©rationnels, 50% d'amÃ©lioration de la prÃ©cision des prÃ©visions, et un retour sur investissement de 300% dans les 18 premiers mois.",
    "Quelles technologies IA utilisez-vous ?": "Nous utilisons des technologies de pointe : Machine Learning avancÃ©, Deep Learning, NLP (traitement du langage naturel), algorithmes prÃ©dictifs, et des modÃ¨les d'IA explicable adaptÃ©s aux exigences financiÃ¨res.",
    "Combien coÃ»te une implÃ©mentation IA ?": "Nos solutions commencent Ã  partir de 15 000 CHF selon la complexitÃ©. Nous proposons des packages modulaires adaptÃ©s Ã  votre budget et vos besoins spÃ©cifiques. Contactez-nous pour un devis personnalisÃ©.",
    "L'IA peut-elle amÃ©liorer mes prÃ©visions ?": "Absolument ! Notre IA analyse des milliers de variables simultanÃ©ment, identifie des patterns invisibles Ã  l'Å“il humain, et amÃ©liore la prÃ©cision des prÃ©visions de 40-60% en moyenne par rapport aux mÃ©thodes traditionnelles.",
    "Comment assurer la sÃ©curitÃ© des donnÃ©es ?": "Nous appliquons les standards les plus Ã©levÃ©s : chiffrement AES-256, conformitÃ© RGPD, audits sÃ©curitaires rÃ©guliers, hÃ©bergement en Suisse, et architecture zero-trust pour protÃ©ger vos donnÃ©es financiÃ¨res sensibles."
  },
  en: {
    "What is AI in finance?": "AI in finance transforms financial management by automating data analysis, fraud detection, and investment optimization. It enables faster and more accurate decision-making.",
    "What are the benefits of AI for EPM?": "AI revolutionizes EPM (Enterprise Performance Management) by automating budget forecasts, optimizing variance analysis, and providing real-time predictive insights to improve business performance.",
    "How to integrate AI in my system?": "Our integration process includes: 1) Infrastructure audit, 2) AI model customization, 3) Progressive migration, 4) Team training, and 5) Continuous support for smooth transition.",
    "What is the ROI of AI in finance?": "Our clients observe on average: 35% reduction in operational costs, 50% improvement in forecast accuracy, and 300% return on investment within the first 18 months.",
    "What AI technologies do you use?": "We use cutting-edge technologies: Advanced Machine Learning, Deep Learning, NLP, predictive algorithms, and explainable AI models adapted to financial requirements.",
    "How much does AI implementation cost?": "Our solutions start from CHF 15,000 depending on complexity. We offer modular packages adapted to your budget and specific needs. Contact us for a personalized quote.",
    "Can AI improve my forecasts?": "Absolutely! Our AI analyzes thousands of variables simultaneously, identifies patterns invisible to the human eye, and improves forecast accuracy by 40-60% on average compared to traditional methods.",
    "How to ensure data security?": "We apply the highest standards: AES-256 encryption, GDPR compliance, regular security audits, Swiss hosting, and zero-trust architecture to protect your sensitive financial data."
  },
  de: {
    "Was ist KI im Finanzwesen?": "KI im Finanzwesen transformiert das Finanzmanagement durch Automatisierung der Datenanalyse, Betrugserkennung und Investitionsoptimierung. Sie ermÃ¶glicht schnellere und prÃ¤zisere Entscheidungen.",
    "Was sind die Vorteile von KI fÃ¼r EPM?": "KI revolutioniert EPM (Enterprise Performance Management) durch Automatisierung von Budgetprognosen, Optimierung von Abweichungsanalysen und Bereitstellung von Echtzeit-Predictive-Insights zur Verbesserung der Unternehmensleistung.",
    "Wie integriere ich KI in mein System?": "Unser Integrationsprozess umfasst: 1) Infrastruktur-Audit, 2) KI-Modell-Anpassung, 3) Progressive Migration, 4) Team-Schulung und 5) Kontinuierliche UnterstÃ¼tzung fÃ¼r reibungslose ÃœbergÃ¤nge.",
    "Was ist der ROI von KI im Finanzwesen?": "Unsere Kunden beobachten im Durchschnitt: 35% Reduzierung der Betriebskosten, 50% Verbesserung der Prognosegenauigkeit und 300% ROI innerhalb der ersten 18 Monate.",
    "Welche KI-Technologien verwenden Sie?": "Wir verwenden modernste Technologien: Fortgeschrittenes Machine Learning, Deep Learning, NLP, prÃ¤diktive Algorithmen und erklÃ¤rbare KI-Modelle, angepasst an finanzielle Anforderungen.",
    "Wie viel kostet eine KI-Implementierung?": "Unsere LÃ¶sungen beginnen bei CHF 15.000 je nach KomplexitÃ¤t. Wir bieten modulare Pakete, angepasst an Ihr Budget und spezifische BedÃ¼rfnisse. Kontaktieren Sie uns fÃ¼r ein personalisiertes Angebot.",
    "Kann KI meine Prognosen verbessern?": "Absolut! Unsere KI analysiert tausende Variablen gleichzeitig, identifiziert fÃ¼r das menschliche Auge unsichtbare Muster und verbessert die Prognosegenauigkeit um 40-60% im Vergleich zu traditionellen Methoden.",
    "Wie stelle ich Datensicherheit sicher?": "Wir wenden hÃ¶chste Standards an: AES-256-VerschlÃ¼sselung, DSGVO-KonformitÃ¤t, regelmÃ¤ÃŸige Sicherheitsaudits, Schweizer Hosting und Zero-Trust-Architektur zum Schutz Ihrer sensiblen Finanzdaten."
  }
};

// Variables globales
let currentLang = "fr";
let isTyping = false;
let expanded = false;
const messagesContainer = document.getElementById("chatbot-messages");
const questionsContainer = document.getElementById("questions-container");
const questionsTitle = document.getElementById("questions-title");

function getResponseForQuestion(question, lang) {
  return responses[lang][question] || responses[lang]["Qu'est-ce que l'IA en finance ?"] || "Merci pour votre question ! Notre Ã©quipe vous contactera bientÃ´t.";
}

function showTypingIndicator() {
  const indicator = document.createElement("div");
  indicator.id = "typing-indicator";
  indicator.className = "text-left message-fade-in";
  
  const bubble = document.createElement("div");
  bubble.className = "typing-indicator";
  
  for (let i = 0; i < 3; i++) {
    const dot = document.createElement("div");
    dot.className = "typing-dot";
    bubble.appendChild(dot);
  }
  
  indicator.appendChild(bubble);
  messagesContainer.appendChild(indicator);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

function hideTypingIndicator() {
  const indicator = document.getElementById("typing-indicator");
  if (indicator) {
    indicator.remove();
  }
}

function addMessage(text, sender = "bot", animate = true) {
  const msg = document.createElement("div");
  msg.className = `${sender === "user" ? "text-right" : "text-left"} ${animate ? "message-fade-in" : ""}`;
  
  const bubble = document.createElement("div");
  bubble.className = `inline-block px-6 py-4 rounded-2xl max-w-xs lg:max-w-md text-sm font-medium ${
    sender === "user" 
      ? 'message-bubble-user text-white' 
      : 'message-bubble-bot text-gray-800'
  }`;
  bubble.style.whiteSpace = "pre-wrap";
  bubble.textContent = text;
  msg.appendChild(bubble);
  messagesContainer.appendChild(msg);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// Fonction pour vider la zone des messages avec animation
function clearMessages() {
  messagesContainer.classList.add('messages-clearing');
  
  setTimeout(() => {
    messagesContainer.innerHTML = '';
    messagesContainer.classList.remove('messages-clearing');
    
    // Afficher le nouveau message d'accueil
    typeMessage(translations[currentLang].welcome);
  }, 300);
}

function updateQuickQuestions() {
  questionsContainer.innerHTML = "";
  questionsTitle.innerHTML = `
    <svg class="w-4 h-4 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
    </svg>
    ${translations[currentLang].questionsTitle}
  `;

  const questions = quickQuestions[currentLang];
  const visibleCount = expanded ? questions.length : 3;
  const visibleQuestions = questions.slice(0, visibleCount);

  visibleQuestions.forEach((question, index) => {
    const button = document.createElement("button");
    button.className = "question-btn w-full text-left p-4 rounded-xl text-sm font-medium text-gray-700 relative";
    button.textContent = question;
    button.onclick = () => {
      addMessage(question, "user");
      setTimeout(() => {
        showTypingIndicator();
        setTimeout(() => {
          hideTypingIndicator();
          const response = getResponseForQuestion(question, currentLang);
          addMessage(response, "bot");
        }, 1500);
      }, 500);
    };
    
    // Animation d'apparition dÃ©calÃ©e
    setTimeout(() => {
      button.style.opacity = '0';
      button.style.transform = 'translateY(20px)';
      questionsContainer.appendChild(button);
      
      setTimeout(() => {
        button.style.transition = 'all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        button.style.opacity = '1';
        button.style.transform = 'translateY(0)';
      }, 50);
    }, index * 100);
  });

  if (questions.length > 3) {
    const toggleButton = document.createElement("button");
    toggleButton.className = "toggle-btn w-full p-3 text-center text-sm font-semibold mt-2 relative z-10";
    toggleButton.textContent = expanded
      ? translations[currentLang].seeLess
      : translations[currentLang].seeMore;

    toggleButton.addEventListener("click", () => {
      expanded = !expanded;
      updateQuickQuestions();
    });

    setTimeout(() => {
      questionsContainer.appendChild(toggleButton);
    }, visibleQuestions.length * 100 + 200);
  }
}

// Effet de frappe pour le message d'accueil
function typeMessage(text, callback) {
  const tempMsg = document.createElement("div");
  tempMsg.className =
