<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helvetic AI Chatbot</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.glass-effect {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}
.gradient-bg {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 #f1f5f9;
}
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  background: #f1f5f9;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}
.typing-indicator {
  display: flex;
  padding: 8px 16px;
  background: #e5e7eb;
  border-radius: 16px;
  width: fit-content;
  margin: 4px 0;
}
.typing-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #6b7280;
  animation: typing 1.4s infinite;
  margin-right: 4px;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; margin-right: 0; }
@keyframes typing {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-8px); opacity: 1; }
}
.message-fade-in {
  animation: fadeInUp 0.3s ease-out;
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.input-container {
  position: relative;
}
.send-btn {
  transition: all 0.2s ease;
}
.send-btn:hover {
  transform: scale(1.05);
}
.conversation-starter {
  transition: all 0.2s ease;
  border: 1px solid #e5e7eb;
}
.conversation-starter:hover {
  border-color: #3b82f6;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
}
.quick-action {
  animation: slideIn 0.3s ease-out forwards;
  opacity: 0;
}
@keyframes slideIn {
  to { opacity: 1; transform: translateX(0); }
}
</style>
</head>
<body>

<!-- FenÃªtre du chatbot -->
<div id="chatbot-window" class="w-full h-screen glass-effect flex flex-col">

  <!-- Header amÃ©liorÃ© -->
  <div class="gradient-bg text-white flex justify-between items-center p-4 shadow-lg">
    <div class="flex items-center space-x-3">
      <div class="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center">
        <span class="text-sm font-bold">HA</span>
      </div>
      <div>
        <span class="font-bold">Helvetic AI</span>
        <div class="text-xs opacity-75" id="status-indicator">En ligne</div>
      </div>
    </div>
    <div class="flex items-center space-x-2">
      <select id="lang-select" class="text-black rounded px-2 py-1 text-sm">
        <option value="fr">ğŸ‡«ğŸ‡· FR</option>
        <option value="en">ğŸ‡¬ğŸ‡§ EN</option>
        <option value="de">ğŸ‡©ğŸ‡ª DE</option>
      </select>
      <button onclick="parent.closeChatbot()" class="ml-2 text-lg font-bold hover:bg-white/20 w-6 h-6 rounded-full flex items-center justify-center transition-colors">Ã—</button>
    </div>
  </div>

  <!-- Messages avec scroll amÃ©liorÃ© -->
  <div id="chatbot-messages" class="flex-1 overflow-y-auto p-4 space-y-3 scrollbar-thin bg-gray-50"></div>

  <!-- Zone de saisie amÃ©liorÃ©e -->
  <div class="border-t bg-white p-4">
    <div class="input-container flex space-x-2">
      <input 
        type="text" 
        id="user-input" 
        placeholder="Tapez votre message..."
        class="flex-1 border rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        onkeypress="handleKeyPress(event)"
      >
      <button 
        id="send-button"
        onclick="sendMessage()"
        class="send-btn bg-blue-600 text-white px-4 py-2 rounded-full hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"
      >
        <span id="send-icon">â†’</span>
      </button>
    </div>
  </div>

  <!-- Suggestions de conversation -->
  <div id="conversation-starters" class="p-4 border-t bg-gray-50 space-y-2">
    <div class="text-sm font-medium text-gray-600 mb-2" id="suggestions-title">Suggestions :</div>
    <div id="suggestions-container" class="space-y-2"></div>
  </div>
</div>

<!-- Base de connaissances Ã©tendue -->
<script>
const knowledgeBase = {
  fr: {
    // Questions sur l'IA et la finance
    "qu'est-ce que l'ia en finance": "L'Intelligence Artificielle en finance utilise des algorithmes avancÃ©s pour automatiser et optimiser les processus financiers : prÃ©visions, analyses de risques, dÃ©tection de fraudes, et aide Ã  la dÃ©cision. Chez Helvetic AI, nous nous concentrons sur l'EPM (Enterprise Performance Management) pour amÃ©liorer la performance financiÃ¨re.",
    
    "avantages ia epm": "Les avantages de l'IA pour l'EPM incluent : ğŸ“Š PrÃ©visions plus prÃ©cises, âš¡ Automatisation des processus, ğŸ¯ Analyses prÃ©dictives, ğŸ’¡ Recommandations intelligentes, ğŸ”’ SÃ©curitÃ© renforcÃ©e, et â° Gain de temps significatif sur les tÃ¢ches rÃ©pÃ©titives.",
    
    "comment intÃ©grer ia systÃ¨me": "L'intÃ©gration de l'IA se fait en 5 Ã©tapes : 1ï¸âƒ£ Analyse de vos besoins actuels, 2ï¸âƒ£ Conception de la solution adaptÃ©e, 3ï¸âƒ£ DÃ©veloppement et intÃ©gration technique, 4ï¸âƒ£ Formation de vos Ã©quipes, 5ï¸âƒ£ Support et amÃ©lioration continue. Nous accompagnons chaque Ã©tape.",
    
    "roi ia finance": "Le ROI de l'IA en finance se mesure gÃ©nÃ©ralement par : ğŸ’° RÃ©duction des coÃ»ts opÃ©rationnels (20-40%), â±ï¸ Gain de temps sur les processus (50-70%), ğŸ“ˆ AmÃ©lioration de la prÃ©cision des prÃ©visions, et ğŸ¯ Meilleure prise de dÃ©cision stratÃ©gique.",
    
    "technologies ia utilisÃ©es": "Nous utilisons des technologies IA de pointe : Machine Learning, Deep Learning, Natural Language Processing, algorithmes prÃ©dictifs, et solutions d'automatisation intelligente (RPA). Toutes nos solutions respectent les standards de sÃ©curitÃ© suisses.",
    
    "coÃ»t implÃ©mentation ia": "Le coÃ»t dÃ©pend de la complexitÃ© du projet. Nous proposons : ğŸ“‹ Audit gratuit initial, ğŸ’¡ Solutions modulaires adaptÃ©es Ã  votre budget, ğŸ”„ ImplÃ©mentation progressive, et ğŸ“Š ROI mesurable dÃ¨s les premiers mois. Contactez-nous pour un devis personnalisÃ©.",
    
    "ia amÃ©liorer prÃ©visions": "Oui ! L'IA peut amÃ©liorer vos prÃ©visions de 30-50% grÃ¢ce Ã  : ğŸ” Analyse de patterns complexes, ğŸ“Š Traitement de donnÃ©es massives, ğŸ¯ ModÃ¨les prÃ©dictifs avancÃ©s, et ğŸ”„ Apprentissage continu Ã  partir des rÃ©sultats passÃ©s.",
    
    "sÃ©curitÃ© donnÃ©es ia": "La sÃ©curitÃ© est notre prioritÃ© : ğŸ”’ Chiffrement end-to-end, ğŸ›ï¸ ConformitÃ© RGPD et standards suisses, ğŸ›¡ï¸ Audit de sÃ©curitÃ© rÃ©guliers, ğŸ” ContrÃ´les d'accÃ¨s stricts, et ğŸ“ DonnÃ©es hÃ©bergÃ©es en Suisse.",
    
    "services helvetic ai": "Helvetic AI propose 4 expertises principales : ğŸ“ˆ PrÃ©vision & BudgÃ©tisation, ğŸ¤– Automatisation des processus, ğŸ¯ Aide Ã  la dÃ©cision, et ğŸ—ï¸ Solutions EPM. Nous combinons expertise technique et connaissance mÃ©tier finance.",
    
    "Ã©quipe helvetic ai": "Notre Ã©quipe fondatrice : ğŸ‘©â€ğŸ’¼ Kahina Aoudia (Co-fondatrice, 13 ans d'expÃ©rience IBM PA, expertise pÃ©dagogique et analyse) et ğŸ‘¨â€ğŸ’» Adnane Baahmed (Co-fondateur, 16 ans d'expÃ©rience BI/EPM, expert BOARD et IBM PA/TM1).",
    
    "contact helvetic ai": "ğŸ“ Adresse : Rue de Chantepoulet 10, 1201 GenÃ¨ve, Suisse\nğŸ“§ Email : contact@helveticai.ch\nğŸ› ï¸ Support : helviticaich@gmail.com\nğŸ“ TÃ©lÃ©phone : +41 22 123 45 67",
    
    "mÃ©thodologie helvetic ai": "Notre mÃ©thodologie en 5 Ã©tapes garantit le succÃ¨s : 1ï¸âƒ£ Analyse approfondie des besoins, 2ï¸âƒ£ Conception sur mesure, 3ï¸âƒ£ DÃ©veloppement agile, 4ï¸âƒ£ Formation complÃ¨te des Ã©quipes, 5ï¸âƒ£ Support continu et optimisation.",
    
    "diffÃ©rence helvetic ai": "Ce qui nous distingue : ğŸ‡¨ğŸ‡­ QualitÃ© suisse, ğŸ”’ SÃ©curitÃ© maximale, ğŸ¯ Focus EPM/Finance, ğŸ‘¥ Expertise Ã©prouvÃ©e, ğŸ’¡ Innovation pragmatique, et ğŸ¤ Accompagnement personnalisÃ©."
  },
  
  en: {
    "what is ai in finance": "Artificial Intelligence in finance uses advanced algorithms to automate and optimize financial processes: forecasting, risk analysis, fraud detection, and decision support. At Helvetic AI, we focus on EPM (Enterprise Performance Management) to improve financial performance.",
    
    "ai epm benefits": "AI benefits for EPM include: ğŸ“Š More accurate forecasts, âš¡ Process automation, ğŸ¯ Predictive analytics, ğŸ’¡ Smart recommendations, ğŸ”’ Enhanced security, and â° Significant time savings on repetitive tasks.",
    
    "how integrate ai system": "AI integration follows 5 steps: 1ï¸âƒ£ Analysis of your current needs, 2ï¸âƒ£ Tailored solution design, 3ï¸âƒ£ Technical development and integration, 4ï¸âƒ£ Team training, 5ï¸âƒ£ Ongoing support and improvement. We guide every step.",
    
    "ai finance roi": "AI ROI in finance is measured by: ğŸ’° Operational cost reduction (20-40%), â±ï¸ Process time savings (50-70%), ğŸ“ˆ Improved forecast accuracy, and ğŸ¯ Better strategic decision-making.",
    
    "ai technologies used": "We use cutting-edge AI technologies: Machine Learning, Deep Learning, Natural Language Processing, predictive algorithms, and intelligent automation solutions (RPA). All our solutions meet Swiss security standards.",
    
    "ai implementation cost": "Cost depends on project complexity. We offer: ğŸ“‹ Free initial audit, ğŸ’¡ Modular solutions fitting your budget, ğŸ”„ Progressive implementation, and ğŸ“Š Measurable ROI from the first months. Contact us for a personalized quote.",
    
    "can ai improve forecasts": "Yes! AI can improve your forecasts by 30-50% through: ğŸ” Complex pattern analysis, ğŸ“Š Massive data processing, ğŸ¯ Advanced predictive models, and ğŸ”„ Continuous learning from past results.",
    
    "ai data security": "Security is our priority: ğŸ”’ End-to-end encryption, ğŸ›ï¸ GDPR compliance and Swiss standards, ğŸ›¡ï¸ Regular security audits, ğŸ” Strict access controls, and ğŸ“ Data hosted in Switzerland.",
    
    "helvetic ai services": "Helvetic AI offers 4 main expertise areas: ğŸ“ˆ Forecasting & Budgeting, ğŸ¤– Process Automation, ğŸ¯ Decision Support, and ğŸ—ï¸ EPM Solutions. We combine technical expertise with finance business knowledge.",
    
    "helvetic ai team": "Our founding team: ğŸ‘©â€ğŸ’¼ Kahina Aoudia (Co-founder, 13 years IBM PA experience, pedagogical and analytical expertise) and ğŸ‘¨â€ğŸ’» Adnane Baahmed (Co-founder, 16 years BI/EPM experience, BOARD and IBM PA/TM1 expert).",
    
    "contact helvetic ai": "ğŸ“ Address: Rue de Chantepoulet 10, 1201 Geneva, Switzerland\nğŸ“§ Email: contact@helveticai.ch\nğŸ› ï¸ Support: helviticaich@gmail.com\nğŸ“ Phone: +41 22 123 45 67",
    
    "helvetic ai methodology": "Our 5-step methodology ensures success: 1ï¸âƒ£ Thorough needs analysis, 2ï¸âƒ£ Custom design, 3ï¸âƒ£ Agile development, 4ï¸âƒ£ Complete team training, 5ï¸âƒ£ Ongoing support and optimization.",
    
    "helvetic ai difference": "What sets us apart: ğŸ‡¨ğŸ‡­ Swiss quality, ğŸ”’ Maximum security, ğŸ¯ EPM/Finance focus, ğŸ‘¥ Proven expertise, ğŸ’¡ Pragmatic innovation, and ğŸ¤ Personalized support."
  },
  
  de: {
    "was ist ki finanzen": "KÃ¼nstliche Intelligenz im Finanzwesen nutzt fortgeschrittene Algorithmen zur Automatisierung und Optimierung von Finanzprozessen: Prognosen, Risikoanalyse, Betrugserkennung und EntscheidungsunterstÃ¼tzung. Bei Helvetic AI konzentrieren wir uns auf EPM zur Verbesserung der Finanzperformance.",
    
    "ki epm vorteile": "KI-Vorteile fÃ¼r EPM umfassen: ğŸ“Š PrÃ¤zisere Prognosen, âš¡ Prozessautomatisierung, ğŸ¯ Predictive Analytics, ğŸ’¡ Intelligente Empfehlungen, ğŸ”’ Erweiterte Sicherheit, und â° Erhebliche Zeitersparnis bei repetitiven Aufgaben.",
    
    "ki system integration": "KI-Integration erfolgt in 5 Schritten: 1ï¸âƒ£ Analyse Ihrer aktuellen BedÃ¼rfnisse, 2ï¸âƒ£ MaÃŸgeschneiderte LÃ¶sungskonzeption, 3ï¸âƒ£ Technische Entwicklung und Integration, 4ï¸âƒ£ Team-Schulung, 5ï¸âƒ£ Laufender Support und Verbesserung.",
    
    "ki finanzen roi": "KI-ROI im Finanzwesen wird gemessen durch: ğŸ’° Betriebskostensenkung (20-40%), â±ï¸ Zeitersparnis bei Prozessen (50-70%), ğŸ“ˆ Verbesserte Prognosegenauigkeit, und ğŸ¯ Bessere strategische Entscheidungsfindung.",
    
    "verwendete ki technologien": "Wir nutzen modernste KI-Technologien: Machine Learning, Deep Learning, Natural Language Processing, prÃ¤diktive Algorithmen und intelligente AutomatisierungslÃ¶sungen (RPA). Alle LÃ¶sungen erfÃ¼llen Schweizer Sicherheitsstandards.",
    
    "ki implementierung kosten": "Kosten hÃ¤ngen von der ProjektkomplexitÃ¤t ab. Wir bieten: ğŸ“‹ Kostenlose Erstanalyse, ğŸ’¡ Modulare LÃ¶sungen fÃ¼r Ihr Budget, ğŸ”„ Schrittweise Implementierung, und ğŸ“Š Messbarer ROI ab den ersten Monaten.",
    
    "kann ki prognosen verbessern": "Ja! KI kann Ihre Prognosen um 30-50% verbessern durch: ğŸ” Komplexe Musteranalyse, ğŸ“Š Massive Datenverarbeitung, ğŸ¯ Fortgeschrittene prÃ¤diktive Modelle, und ğŸ”„ Kontinuierliches Lernen aus vergangenen Ergebnissen.",
    
    "ki datensicherheit": "Sicherheit ist unsere PrioritÃ¤t: ğŸ”’ End-to-End-VerschlÃ¼sselung, ğŸ›ï¸ DSGVO-KonformitÃ¤t und Schweizer Standards, ğŸ›¡ï¸ RegelmÃ¤ÃŸige Sicherheitsaudits, ğŸ” Strenge Zugangskontrollen, und ğŸ“ Datenhosting in der Schweiz.",
    
    "helvetic ai services": "Helvetic AI bietet 4 Hauptkompetenzbereiche: ğŸ“ˆ Prognose & Budgetierung, ğŸ¤– Prozessautomatisierung, ğŸ¯ EntscheidungsunterstÃ¼tzung, und ğŸ—ï¸ EPM-LÃ¶sungen. Wir kombinieren technische Expertise mit Finanz-Know-how.",
    
    "helvetic ai team": "Unser GrÃ¼ndungsteam: ğŸ‘©â€ğŸ’¼ Kahina Aoudia (MitgrÃ¼nderin, 13 Jahre IBM PA Erfahrung, pÃ¤dagogische und analytische Expertise) und ğŸ‘¨â€ğŸ’» Adnane Baahmed (MitgrÃ¼nder, 16 Jahre BI/EPM Erfahrung, BOARD und IBM PA/TM1 Experte).",
    
    "helvetic ai kontakt": "ğŸ“ Adresse: Rue de Chantepoulet 10, 1201 Genf, Schweiz\nğŸ“§ Email: contact@helveticai.ch\nğŸ› ï¸ Support: helviticaich@gmail.com\nğŸ“ Telefon: +41 22 123 45 67",
    
    "helvetic ai methodik": "Unsere 5-Schritte-Methodik garantiert Erfolg: 1ï¸âƒ£ GrÃ¼ndliche Bedarfsanalyse, 2ï¸âƒ£ MaÃŸgeschneiderte Konzeption, 3ï¸âƒ£ Agile Entwicklung, 4ï¸âƒ£ Umfassende Team-Schulung, 5ï¸âƒ£ Laufender Support und Optimierung.",
    
    "helvetic ai unterschied": "Was uns auszeichnet: ğŸ‡¨ğŸ‡­ Schweizer QualitÃ¤t, ğŸ”’ Maximale Sicherheit, ğŸ¯ EPM/Finanz-Focus, ğŸ‘¥ BewÃ¤hrte Expertise, ğŸ’¡ Pragmatische Innovation, und ğŸ¤ Personalisierte Betreuung."
  }
};

const conversationStarters = {
  fr: [
    "Qu'est-ce que l'IA en finance ?",
    "Quels sont les avantages de l'IA pour l'EPM ?",
    "Comment intÃ©grer l'IA dans mon systÃ¨me ?",
    "Quel est le ROI de l'IA en finance ?",
    "Quelles technologies IA utilisez-vous ?",
    "Comment assurer la sÃ©curitÃ© des donnÃ©es ?",
    "Qui compose l'Ã©quipe Helvetic AI ?",
    "Comment vous contacter ?"
  ],
  en: [
    "What is AI in finance?",
    "What are the benefits of AI for EPM?",
    "How to integrate AI in my system?",
    "What is the ROI of AI in finance?",
    "What AI technologies do you use?",
    "How to ensure data security?",
    "Who is the Helvetic AI team?",
    "How to contact you?"
  ],
  de: [
    "Was ist KI im Finanzwesen?",
    "Was sind die Vorteile von KI fÃ¼r EPM?",
    "Wie integriere ich KI in mein System?",
    "Was ist der ROI von KI im Finanzwesen?",
    "Welche KI-Technologien verwenden Sie?",
    "Wie stelle ich Datensicherheit sicher?",
    "Wer ist das Helvetic AI Team?",
    "Wie kann ich Sie kontaktieren?"
  ]
};

const translations = {
  fr: {
    typing: "En train d'Ã©crire...",
    online: "En ligne",
    placeholder: "Tapez votre message...",
    suggestions: "Suggestions :",
    welcome: "Bonjour ! Je suis votre assistant IA Helvetic. Comment puis-je vous aider avec l'IA et la performance financiÃ¨re ?"
  },
  en: {
    typing: "Typing...",
    online: "Online",
    placeholder: "Type your message...",
    suggestions: "Suggestions:",
    welcome: "Hello! I'm your Helvetic AI assistant. How can I help you with AI and financial performance?"
  },
  de: {
    typing: "Schreibt...",
    online: "Online",
    placeholder: "Nachricht eingeben...",
    suggestions: "VorschlÃ¤ge:",
    welcome: "Hallo! Ich bin Ihr Helvetic AI Assistent. Wie kann ich Ihnen mit KI und Finanzperformance helfen?"
  }
};
</script>

<!-- Script principal amÃ©liorÃ© -->
<script>
const messagesContainer = document.getElementById("chatbot-messages");
const userInput = document.getElementById("user-input");
const sendButton = document.getElementById("send-button");
const sendIcon = document.getElementById("send-icon");
const langSelect = document.getElementById("lang-select");
const statusIndicator = document.getElementById("status-indicator");
const suggestionsContainer = document.getElementById("suggestions-container");
const suggestionsTitle = document.getElementById("suggestions-title");

let currentLang = "fr";
let isTyping = false;

// Fonction d'affichage de message amÃ©liorÃ©e
function addMessage(text, sender = "bot", animate = true) {
  const msg = document.createElement("div");
  msg.className = `${sender === "user" ? "text-right" : "text-left"} ${animate ? "message-fade-in" : ""}`;
  
  const bubble = document.createElement("div");
  bubble.className = `inline-block px-4 py-2 rounded-2xl max-w-xs lg:max-w-md ${
    sender === "user" 
      ? 'bg-gradient-to-r from-blue-500 to-blue-600 text-white' 
      : 'bg-white text-gray-900 border border-gray-200 shadow-sm'
  }`;
  bubble.style.whiteSpace = "pre-wrap";
  bubble.textContent = text;
  
  msg.appendChild(bubble);
  messagesContainer.appendChild(msg);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// Indicateur de frappe
function showTypingIndicator() {
  if (isTyping) return;
  isTyping = true;
  
  const msg = document.createElement("div");
  msg.className = "text-left typing-message";
  msg.innerHTML = `
    <div class="typing-indicator">
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
      <div class="typing-dot"></div>
    </div>
  `;
  messagesContainer.appendChild(msg);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
  statusIndicator.textContent = translations[currentLang].typing;
}

function hideTypingIndicator() {
  isTyping = false;
  const typingMsg = document.querySelector(".typing-message");
  if (typingMsg) typingMsg.remove();
  statusIndicator.textContent = translations[currentLang].online;
}

// Recherche de rÃ©ponse amÃ©liorÃ©e
function findAnswer(question) {
  const normalizedQuestion = question.toLowerCase()
    .replace(/[Ã Ã¡Ã¢Ã¤Ã£]/g, 'a')
    .replace(/[Ã¨Ã©ÃªÃ«]/g, 'e')
    .replace(/[Ã¬Ã­Ã®Ã¯]/g, 'i')
    .replace(/[Ã²Ã³Ã´Ã¶Ãµ]/g, 'o')
    .replace(/[Ã¹ÃºÃ»Ã¼]/g, 'u')
    .replace(/[Ã§]/g, 'c')
    .replace(/[^a-z0-9\s]/g, '')
    .trim();

  const kb = knowledgeBase[currentLang];
  
  // Recherche exacte
  for (let key in kb) {
    if (normalizedQuestion.includes(key.replace(/[^a-z0-9\s]/g, '').trim())) {
      return kb[key];
    }
  }
  
  // Recherche par mots-clÃ©s
  const keywords = normalizedQuestion.split(' ');
  for (let key in kb) {
    const keyWords = key.split(' ');
    const matches = keyWords.filter(kw => keywords.some(k => k.includes(kw) || kw.includes(k)));
    if (matches.length >= 2) {
      return kb[key];
    }
  }
  
  // RÃ©ponse par dÃ©faut
  const defaultResponses = {
    fr: "Je comprends votre question, mais je n'ai pas de rÃ©ponse spÃ©cifique. Pouvez-vous reformuler ou choisir une question dans les suggestions ? Pour des informations dÃ©taillÃ©es, contactez-nous directement : contact@helveticai.ch",
    en: "I understand your question, but I don't have a specific answer. Could you rephrase or choose a question from the suggestions? For detailed information, contact us directly: contact@helveticai.ch",
    de: "Ich verstehe Ihre Frage, habe aber keine spezifische Antwort. KÃ¶nnten Sie umformulieren oder eine Frage aus den VorschlÃ¤gen wÃ¤hlen? FÃ¼r detaillierte Informationen kontaktieren Sie uns direkt: contact@helveticai.ch"
  };
  
  return defaultResponses[currentLang];
}

// Envoi de message amÃ©liorÃ©
function sendMessage() {
  const message = userInput.value.trim();
  if (!message || isTyping) return;
  
  // DÃ©sactiver l'envoi temporairement
  sendButton.disabled = true;
  sendIcon.textContent = "â‹¯";
  
  // Ajouter message utilisateur
  addMessage(message, "user");
  userInput.value = "";
  
  // Simuler dÃ©lai de traitement
  showTypingIndicator();
  
  setTimeout(() => {
    hideTypingIndicator();
    const response = findAnswer(message);
    addMessage(response, "bot");
    
    // RÃ©activer l'envoi
    sendButton.disabled = false;
    sendIcon.textContent = "â†’";
    
    // Mettre Ã  jour les suggestions
    updateConversationStarters();
  }, Math.random() * 1000 + 800); // DÃ©lai rÃ©aliste variable
}

// Gestion de la touche EntrÃ©e
function handleKeyPress(event) {
  if (event.key === "Enter" && !event.shiftKey) {
    event.preventDefault();
    sendMessage();
  }
}

// Mise Ã  jour des suggestions de conversation
function updateConversationStarters() {
  suggestionsContainer.innerHTML = "";
  suggestionsTitle.textContent = translations[currentLang].suggestions;
  
  const starters = conversationStarters[currentLang];
  const randomStarters = starters.sort(() => 0.5 - Math.random()).slice(0, 4);
  
  randomStarters.forEach((starter, index) => {
    const button = document.createElement("button");
    button.className = "conversation-starter text-left p-3 rounded-lg bg-white hover:bg-gray-50 text-sm quick-action";
    button.style.animationDelay = `${index * 0.1}s`;
    button.textContent = starter;
    button.onclick = () => {
      userInput.value = starter;
      sendMessage();
    };
    suggestionsContainer.appendChild(button);
  });
}

// Changement de langue amÃ©liorÃ©
langSelect.addEventListener("change", (e) => {
  currentLang = e.target.value;
  
  // Mise Ã  jour de l'interface
  statusIndicator.textContent = translations[currentLang].online;
  userInput.placeholder = translations[currentLang].placeholder;
  
  // Reset et message de bienvenue
  messagesContainer.innerHTML = "";
  addMessage(translations[currentLang].welcome, "bot", false);
  
  // Mise Ã  jour des suggestions
  updateConversationStarters();
});

// Initialisation
document.addEventListener("DOMContentLoaded", () => {
  addMessage(translations[currentLang].welcome, "bot", false);
  updateConversationStarters();
  userInput.focus();
});

// Gestion du focus sur l'input
userInput.addEventListener("focus", () => {
  setTimeout(() => {
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }, 100);
});
</script>

</body>
</html>
