<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Helvetic AI Chatbot</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.glass-effect {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}
.gradient-bg {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
.scrollbar-thin {
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 #f1f5f9;
}
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}
.scrollbar-thin::-webkit-scrollbar-track {
  background: #f1f5f9;
}
.scrollbar-thin::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}

/* Animation slide */
.slide {
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.3s ease;
}
.slide.show {
  opacity: 1;
  transform: translateY(0);
}
</style>
</head>
<body>

<!-- Fen√™tre du chatbot -->
<div id="chatbot-window" class="w-full h-screen glass-effect flex flex-col relative overflow-hidden">
  <!-- Header -->
  <div class="gradient-bg text-white flex justify-between items-center p-4 shadow-lg">
    <div class="flex items-center space-x-3">
      <span class="font-bold">Helvetic AI</span>
    </div>
    <div class="flex items-center space-x-2">
      <select id="lang-select" class="text-black rounded px-2 py-1">
        <option value="fr">Fran√ßais</option>
        <option value="en">English</option>
        <option value="de">Deutsch</option>
      </select>
      <button onclick="parent.closeChatbot()" class="ml-2 text-lg font-bold">‚úï</button>
    </div>
  </div>

  <!-- Messages -->
  <div id="chatbot-messages" class="flex-1 overflow-y-auto p-4 space-y-3 scrollbar-thin bg-gray-50"></div>

  <!-- Questions rapides -->
  <div class="border-t bg-white p-4">
    <div class="text-sm font-medium text-gray-600 mb-3" id="questions-title">Questions rapides :</div>
    <div id="questions-container" class="space-y-2"></div>
  </div>
</div>

<!-- Donn√©es -->
<script>
const quickQuestions = {
  fr: [
    "Qu'est-ce que l'IA en finance ?",
    "Quels sont les avantages de l'IA pour l'EPM ?",
    "Comment int√©grer l'IA dans mon syst√®me ?",
    "Quel est le ROI de l'IA en finance ?",
    "Quelles technologies IA utilisez-vous ?",
    "Combien co√ªte une impl√©mentation IA ?",
    "L'IA peut-elle am√©liorer mes pr√©visions ?",
    "Comment assurer la s√©curit√© des donn√©es ?"
  ],
  en: [
    "What is AI in finance?",
    "What are the benefits of AI for EPM?",
    "How to integrate AI in my system?",
    "What is the ROI of AI in finance?",
    "What AI technologies do you use?",
    "How much does AI implementation cost?",
    "Can AI improve my forecasts?",
    "How to ensure data security?"
  ],
  de: [
    "Was ist KI im Finanzwesen?",
    "Was sind die Vorteile von KI f√ºr EPM?",
    "Wie integriere ich KI in mein System?",
    "Was ist der ROI von KI im Finanzwesen?",
    "Welche KI-Technologien verwenden Sie?",
    "Wie viel kostet eine KI-Implementierung?",
    "Kann KI meine Prognosen verbessern?",
    "Wie stelle ich Datensicherheit sicher?"
  ]
};

const translations = {
  fr: { questionsTitle: "Questions rapides :", seeMore: "Voir plus", seeLess: "Voir moins", welcome: "Bonjour üëã Je suis votre assistant IA." },
  en: { questionsTitle: "Quick questions:", seeMore: "See more", seeLess: "See less", welcome: "Hello üëã I'm your AI assistant." },
  de: { questionsTitle: "Schnellfragen:", seeMore: "Mehr anzeigen", seeLess: "Weniger anzeigen", welcome: "Hallo üëã Ich bin Ihr KI-Assistent." }
};
</script>

<!-- Script principal -->
<script>
const messagesContainer = document.getElementById("chatbot-messages");
const langSelect = document.getElementById("lang-select");
const questionsContainer = document.getElementById("questions-container");
const questionsTitle = document.getElementById("questions-title");

let currentLang = "fr";
let expanded = false;

// Fonction message
function addMessage(text, sender = "bot") {
  const msg = document.createElement("div");
  msg.className = sender === "user" ? "text-right" : "text-left";
  msg.innerHTML = `<div class="inline-block px-3 py-2 rounded-xl ${sender === "user" ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-900'}">${text}</div>`;
  messagesContainer.appendChild(msg);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// Questions rapides avec Voir plus / Voir moins
function updateQuickQuestions() {
  questionsContainer.innerHTML = "";
  questionsTitle.textContent = translations[currentLang].questionsTitle;
  const questions = quickQuestions[currentLang];

  const visibleCount = expanded ? questions.length : 3;
  const visibleQuestions = questions.slice(0, visibleCount);

  visibleQuestions.forEach((q, i) => {
    const btn = document.createElement("button");
    btn.className = "slide question-btn w-full text-left p-3 rounded-lg bg-white hover:bg-gray-50 text-sm";
    btn.textContent = q;
    btn.onclick = () => handleQuestion(q);
    questionsContainer.appendChild(btn);

    // animation progressive
    setTimeout(() => { btn.classList.add("show"); }, i * 80);
  });

  if (questions.length > 3) {
    const toggleButton = document.createElement("button");
    toggleButton.className = "slide toggle-btn w-full p-2 text-center text-sm text-blue-600 hover:text-blue-700 font-medium";
    toggleButton.innerText = expanded ? translations[currentLang].seeLess : translations[currentLang].seeMore;
    toggleButton.onclick = () => {
      expanded = !expanded;
      updateQuickQuestions();
    };
    questionsContainer.appendChild(toggleButton);

    // animation du bouton
    setTimeout(() => { toggleButton.classList.add("show"); }, visibleQuestions.length * 80);
  }
}

// R√©ponse IA
function handleQuestion(question) {
  addMessage(question, "user");
  setTimeout(() => {
    addMessage("L'IA appliqu√©e √† la performance financi√®re optimise vos processus gr√¢ce aux algorithmes avanc√©s.", "bot");
  }, 500);
}

// Changement de langue
langSelect.addEventListener("change", (e) => {
  currentLang = e.target.value;
  expanded = false;
  messagesContainer.innerHTML = "";
  addMessage(translations[currentLang].welcome, "bot");
  updateQuickQuestions();
});

// Initialisation
addMessage(translations[currentLang].welcome, "bot");
updateQuickQuestions();
</script>

</body>
</html>
