<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chatbot â€“ Helvetic AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: sans-serif; }
    .lang { display:none; }
    .lang.active { display:block; }
    .flag { width:28px; height:20px; border-radius:3px; cursor:pointer; }
    .msg { padding:8px 12px; margin:6px; border-radius:12px; max-width:80%; }
    .user { background:#2563eb; color:white; align-self:flex-end; }
    .bot { background:#f1f5f9; color:#111; align-self:flex-start; }
  </style>
  <script src="faq.js"></script>
</head>
<body class="bg-white h-full flex flex-col">

  <!-- HEADER -->
  <header class="bg-blue-600 text-white px-4 py-2 flex justify-between items-center">
    <span class="font-semibold">ðŸ¤– Helvetic AI</span>
    <div class="flex gap-2">
      <img src="https://flagcdn.com/w20/fr.png" alt="FR" class="flag" onclick="setLang('fr')">
      <img src="https://flagcdn.com/w20/gb.png" alt="EN" class="flag" onclick="setLang('en')">
      <img src="https://flagcdn.com/w20/de.png" alt="DE" class="flag" onclick="setLang('de')">
    </div>
  </header>

  <!-- CHAT -->
  <main id="chat" class="flex-1 overflow-y-auto p-4 flex flex-col"></main>

  <!-- INPUT -->
  <form id="chat-form" class="p-3 border-t flex gap-2">
    <input id="user-input" type="text" placeholder="Ã‰crivez un message..." 
           class="flex-1 border rounded-lg px-3 py-2" required />
    <button class="bg-blue-600 text-white px-4 rounded-lg">âž¤</button>
  </form>

<script>
let currentLang = localStorage.getItem("chatbot_lang") || "fr";

// Gestion des langues
function setLang(lang){
  currentLang = lang;
  localStorage.setItem("chatbot_lang", lang);
  document.querySelectorAll(".lang").forEach(el => el.classList.remove("active"));
  document.querySelectorAll("."+lang).forEach(el => el.classList.add("active"));
}

// Affiche un message
function addMessage(text, sender){
  const chat = document.getElementById("chat");
  const msg = document.createElement("div");
  msg.className = "msg "+sender;
  msg.textContent = text;
  chat.appendChild(msg);
  chat.scrollTop = chat.scrollHeight;
}

// RÃ©ponse depuis FAQ
function getAnswer(question){
  const lower = question.toLowerCase();
  const entry = faq[currentLang].find(f => lower.includes(f.q.toLowerCase()));
  return entry ? entry.a : {
    fr: "Je nâ€™ai pas compris, pourriez-vous prÃ©ciser ?",
    en: "I didnâ€™t understand, could you clarify?",
    de: "Ich habe das nicht verstanden, kÃ¶nnten Sie prÃ¤zisieren?"
  }[currentLang];
}

// Gestion formulaire
document.getElementById("chat-form").addEventListener("submit", e => {
  e.preventDefault();
  const input = document.getElementById("user-input");
  const text = input.value.trim();
  if(!text) return;
  addMessage(text, "user");
  input.value = "";
  setTimeout(() => addMessage(getAnswer(text), "bot"), 500);
});

// Init
setLang(currentLang);
addMessage({
  fr:"Bonjour ðŸ‘‹, je suis le chatbot Helvetic AI. Comment puis-je vous aider ?",
  en:"Hello ðŸ‘‹, Iâ€™m Helvetic AIâ€™s chatbot. How can I help you?",
  de:"Hallo ðŸ‘‹, ich bin der Helvetic AI Chatbot. Wie kann ich Ihnen helfen?"
}[currentLang], "bot");
</script>
</body>
</html>
