// faq.js - Base de connaissances complÃ¨te IA & Performance FinanciÃ¨re EPM

const faq = {
  fr: {
    // Messages systÃ¨me
    welcome: "Bonjour ðŸ‘‹ Je suis le chatbot Helvitic AI spÃ©cialisÃ© en IA pour la performance financiÃ¨re. Posez-moi vos questions sur l'EPM, l'automatisation ou nos solutions.",
    greeting: "Bonjour! Comment puis-je vous aider avec l'IA en finance ?",
    services: "Nous offrons des solutions IA pour l'EPM : prÃ©visions automatisÃ©es, budgeting intelligent, dÃ©tection d'anomalies, et optimisation des processus financiers.",
    contact: "Vous pouvez nous contacter via email : helviticaich@gmail.com ou par tÃ©lÃ©phone +41 22 123 45 67",
    goodbye: "Merci pour votre intÃ©rÃªt ! N'hÃ©sitez pas Ã  nous recontacter pour vos projets IA & Finance ðŸ‘‹",
    unknown: "Je n'ai pas trouvÃ© d'information sur ce sujet. Pouvez-vous reformuler ou poser une question sur l'IA en finance, l'EPM, ou nos solutions ?",

    // Base de connaissances IA & Finance
    "qu'est-ce que l'ia en finance": "L'IA appliquÃ©e Ã  la performance financiÃ¨re consiste Ã  utiliser des algorithmes avancÃ©s, l'apprentissage automatique et l'analyse prÃ©dictive pour automatiser, optimiser et amÃ©liorer les processus de gestion financiÃ¨re dans le cadre de l'EPM.",
    "ia finance definition": "L'IA appliquÃ©e Ã  la performance financiÃ¨re consiste Ã  utiliser des algorithmes avancÃ©s, l'apprentissage automatique et l'analyse prÃ©dictive pour automatiser, optimiser et amÃ©liorer les processus de gestion financiÃ¨re dans le cadre de l'EPM.",
    
    "avantages ia epm": "Les avantages incluent : automatisation des processus (rÃ©duction 30-50% du temps), prÃ©visions plus prÃ©cises (+15-25%), dÃ©tection d'anomalies en temps rÃ©el, optimisation continue, et rÃ©duction des erreurs humaines.",
    "benefices ia finance": "Les avantages incluent : automatisation des processus (rÃ©duction 30-50% du temps), prÃ©visions plus prÃ©cises (+15-25%), dÃ©tection d'anomalies en temps rÃ©el, optimisation continue, et rÃ©duction des erreurs humaines.",
    
    "ia planification financiere": "L'IA transforme la planification via des modÃ¨les prÃ©dictifs sophistiquÃ©s, simulation de scÃ©narios multiples en temps rÃ©el, intÃ©gration automatique de variables externes, gÃ©nÃ©ration automatique de budgets/forecasts.",
    "planning financier ia": "L'IA transforme la planification via des modÃ¨les prÃ©dictifs sophistiquÃ©s, simulation de scÃ©narios multiples en temps rÃ©el, intÃ©gration automatique de variables externes, gÃ©nÃ©ration automatique de budgets/forecasts.",
    
    "processus epm automatisables": "Processus automatisables : consolidation financiÃ¨re, reporting automatisÃ©, budgeting/forecasting, analyse de variance, allocation des coÃ»ts, contrÃ´le de gestion, rÃ©conciliation des donnÃ©es.",
    "automatisation epm": "Processus automatisables : consolidation financiÃ¨re, reporting automatisÃ©, budgeting/forecasting, analyse de variance, allocation des coÃ»ts, contrÃ´le de gestion, rÃ©conciliation des donnÃ©es.",
    
    "precision previsions ia": "L'IA amÃ©liore la prÃ©cision des prÃ©visions grÃ¢ce Ã  l'analyse de patterns complexes, intÃ©gration de variables externes (indicateurs Ã©conomiques, saisonnalitÃ©), apprentissage continu qui affine les modÃ¨les.",
    "forecasting ia": "L'IA amÃ©liore la prÃ©cision des prÃ©visions grÃ¢ce Ã  l'analyse de patterns complexes, intÃ©gration de variables externes (indicateurs Ã©conomiques, saisonnalitÃ©), apprentissage continu qui affine les modÃ¨les.",
    
    "ia analyse risques": "Oui, l'IA excelle dans l'analyse des risques : dÃ©tection automatique d'anomalies, Ã©valuation de probabilitÃ©s de scÃ©narios, surveillance continue des seuils critiques, alertes prÃ©ventives automatiques.",
    "risk management ia": "Oui, l'IA excelle dans l'analyse des risques : dÃ©tection automatique d'anomalies, Ã©valuation de probabilitÃ©s de scÃ©narios, surveillance continue des seuils critiques, alertes prÃ©ventives automatiques.",
    
    "integration ia epm": "L'intÃ©gration se fait en 6 Ã©tapes : 1) Audit des donnÃ©es 2) DÃ©finition des cas d'usage 3) SÃ©lection des outils 4) Phase pilote 5) DÃ©ploiement progressif 6) Formation des Ã©quipes.",
    "comment integrer ia": "L'intÃ©gration se fait en 6 Ã©tapes : 1) Audit des donnÃ©es 2) DÃ©finition des cas d'usage 3) SÃ©lection des outils 4) Phase pilote 5) DÃ©ploiement progressif 6) Formation des Ã©quipes.",
    
    "prerequis techniques ia": "PrÃ©requis : infrastructure cloud/on-premise suffisante, donnÃ©es propres et cohÃ©rentes, APIs pour intÃ©gration, sÃ©curitÃ© renforcÃ©e, compÃ©tences IA/data science, gouvernance claire.",
    "prerequis ia finance": "PrÃ©requis : infrastructure cloud/on-premise suffisante, donnÃ©es propres et cohÃ©rentes, APIs pour intÃ©gration, sÃ©curitÃ© renforcÃ©e, compÃ©tences IA/data science, gouvernance claire.",
    
    "delais resultats ia": "Premiers rÃ©sultats : 2-3 mois (dÃ©tection anomalies), 4-6 mois (automatisation processus), 6-12 mois (modÃ¨les prÃ©dictifs), 12-24 mois (transformation complÃ¨te EPM).",
    "timeline ia implementation": "Premiers rÃ©sultats : 2-3 mois (dÃ©tection anomalies), 4-6 mois (automatisation processus), 6-12 mois (modÃ¨les prÃ©dictifs), 12-24 mois (transformation complÃ¨te EPM).",
    
    "technologies ia finance": "Technologies clÃ©s : Machine Learning, Deep Learning, Natural Language Processing, Computer Vision, RPA (Robotic Process Automation), IA gÃ©nÃ©rative pour crÃ©ation de contenu.",
    "outils ia epm": "Technologies clÃ©s : Machine Learning, Deep Learning, Natural Language Processing, Computer Vision, RPA (Robotic Process Automation), IA gÃ©nÃ©rative pour crÃ©ation de contenu.",
    
    "solutions epm ia existantes": "Solutions avec IA intÃ©grÃ©e : Oracle EPM Cloud (prÃ©dictif avancÃ©), SAP Analytics Cloud (IA planning), IBM Planning Analytics (analyse cognitive), Microsoft Power BI, Workday Adaptive Planning.",
    "logiciels epm ia": "Solutions avec IA intÃ©grÃ©e : Oracle EPM Cloud (prÃ©dictif avancÃ©), SAP Analytics Cloud (IA planning), IBM Planning Analytics (analyse cognitive), Microsoft Power BI, Workday Adaptive Planning.",
    
    "roi ia finance": "ROI attendu : 200-400% sur 3 ans. Gains typiques : +30-50% productivitÃ©, +15-25% prÃ©cision prÃ©visions, -20-35% coÃ»ts processus, -40-60% dÃ©lais de clÃ´ture.",
    "retour investissement ia": "ROI attendu : 200-400% sur 3 ans. Gains typiques : +30-50% productivitÃ©, +15-25% prÃ©cision prÃ©visions, -20-35% coÃ»ts processus, -40-60% dÃ©lais de clÃ´ture.",
    
    "cout implementation ia": "CoÃ»ts variables selon scope : solutions simples 50-100Kâ‚¬, projets moyens 200-500Kâ‚¬, transformation complÃ¨te 500K-2Mâ‚¬. ROI gÃ©nÃ©ralement atteint en 18-24 mois.",
    "prix solution ia": "CoÃ»ts variables selon scope : solutions simples 50-100Kâ‚¬, projets moyens 200-500Kâ‚¬, transformation complÃ¨te 500K-2Mâ‚¬. ROI gÃ©nÃ©ralement atteint en 18-24 mois.",
    
    "securite donnees ia": "SÃ©curitÃ© renforcÃ©e : chiffrement bout-en-bout, accÃ¨s basÃ© sur les rÃ´les, audit trails complets, conformitÃ© RGPD, hÃ©bergement sÃ©curisÃ© (Swiss hosting disponible), anonymisation des donnÃ©es sensibles.",
    "data security ia": "SÃ©curitÃ© renforcÃ©e : chiffrement bout-en-bout, accÃ¨s basÃ© sur les rÃ´les, audit trails complets, conformitÃ© RGPD, hÃ©bergement sÃ©curisÃ© (Swiss hosting disponible), anonymisation des donnÃ©es sensibles.",
    
    "formation equipes ia": "Formation requise : sensibilisation concepts IA, cas d'usage financiers concrets, manipulation outils pratiques, interprÃ©tation des rÃ©sultats IA, bonnes pratiques gouvernance, formation continue.",
    "training ia finance": "Formation requise : sensibilisation concepts IA, cas d'usage financiers concrets, manipulation outils pratiques, interprÃ©tation des rÃ©sultats IA, bonnes pratiques gouvernance, formation continue.",
    
    "ia remplace controleurs": "Non, l'IA ne remplace pas les contrÃ´leurs de gestion : elle Ã©limine les tÃ¢ches rÃ©pÃ©titives, libÃ¨re du temps pour l'analyse, renforce leur rÃ´le de conseil stratÃ©gique et d'interprÃ©tation des insights IA.",
    "remplacement emplois ia": "Non, l'IA ne remplace pas les contrÃ´leurs de gestion : elle Ã©limine les tÃ¢ches rÃ©pÃ©titives, libÃ¨re du temps pour l'analyse, renforce leur rÃ´le de conseil stratÃ©gique et d'interprÃ©tation des insights IA.",
    
    "tendances ia epm": "Tendances Ã©mergentes : IA gÃ©nÃ©rative (crÃ©ation rapports automatiques), real-time analytics, dÃ©mocratisation outils IA, IA explicable (transparence), edge computing, intÃ©gration critÃ¨res ESG.",
    "futur ia finance": "Tendances Ã©mergentes : IA gÃ©nÃ©rative (crÃ©ation rapports automatiques), real-time analytics, dÃ©mocratisation outils IA, IA explicable (transparence), edge computing, intÃ©gration critÃ¨res ESG."
  },

  en: {
    welcome: "Hello ðŸ‘‹ I'm the Helvitic AI chatbot specialized in AI for financial performance. Ask me about EPM, automation, or our solutions.",
    greeting: "Hello! How can I help you with AI in finance?",
    services: "We provide AI solutions for EPM: automated forecasting, intelligent budgeting, anomaly detection, and financial process optimization.",
    contact: "You can reach us via email: helviticaich@gmail.com or phone +41 22 123 45 67",
    goodbye: "Thank you for your interest! Feel free to contact us again for your AI & Finance projects ðŸ‘‹",
    unknown: "I couldn't find information on this topic. Could you rephrase or ask about AI in finance, EPM, or our solutions?",

    "what is ai in finance": "AI in financial performance uses advanced algorithms, machine learning and predictive analytics to automate, optimize and improve financial management processes within EPM frameworks.",
    "ai finance definition": "AI in financial performance uses advanced algorithms, machine learning and predictive analytics to automate, optimize and improve financial management processes within EPM frameworks.",
    
    "ai epm benefits": "Benefits include: process automation (30-50% time reduction), more accurate forecasts (+15-25%), real-time anomaly detection, continuous optimization, and reduced human errors.",
    "ai finance advantages": "Benefits include: process automation (30-50% time reduction), more accurate forecasts (+15-25%), real-time anomaly detection, continuous optimization, and reduced human errors.",
    
    "ai financial planning": "AI transforms planning through sophisticated predictive models, real-time multi-scenario simulation, automatic integration of external variables, automated budget/forecast generation.",
    "financial planning ai": "AI transforms planning through sophisticated predictive models, real-time multi-scenario simulation, automatic integration of external variables, automated budget/forecast generation.",
    
    "ai integration epm": "Integration in 6 steps: 1) Data audit 2) Use case definition 3) Tool selection 4) Pilot phase 5) Progressive deployment 6) Team training.",
    "how to integrate ai": "Integration in 6 steps: 1) Data audit 2) Use case definition 3) Tool selection 4) Pilot phase 5) Progressive deployment 6) Team training.",
    
    "ai finance roi": "Expected ROI: 200-400% over 3 years. Typical gains: +30-50% productivity, +15-25% forecast accuracy, -20-35% process costs, -40-60% closing time.",
    "return on investment ai": "Expected ROI: 200-400% over 3 years. Typical gains: +30-50% productivity, +15-25% forecast accuracy, -20-35% process costs, -40-60% closing time."
  },

  de: {
    welcome: "Hallo ðŸ‘‹ Ich bin der Helvitic AI Chatbot fÃ¼r KI in der Finanzperformance. Fragen Sie mich zu EPM, Automatisierung oder unseren LÃ¶sungen.",
    greeting: "Hallo! Wie kann ich Ihnen mit KI im Finanzwesen helfen?",
    services: "Wir bieten KI-LÃ¶sungen fÃ¼r EPM: automatisierte Prognosen, intelligente Budgetierung, Anomalieerkennung und Optimierung von Finanzprozessen.",
    contact: "Sie erreichen uns per E-Mail: helviticaich@gmail.com oder Telefon +41 22 123 45 67",
    goodbye: "Vielen Dank fÃ¼r Ihr Interesse! Kontaktieren Sie uns gerne fÃ¼r Ihre KI & Finance Projekte ðŸ‘‹",
    unknown: "Ich konnte keine Information zu diesem Thema finden. KÃ¶nnen Sie umformulieren oder zu KI im Finanzwesen, EPM oder unseren LÃ¶sungen fragen?",

    "was ist ki in finanzen": "KI in der Finanzperformance nutzt fortgeschrittene Algorithmen, maschinelles Lernen und prÃ¤diktive Analytik zur Automatisierung, Optimierung und Verbesserung von Finanzmanagementprozessen im EPM-Rahmen.",
    "ki finanzen definition": "KI in der Finanzperformance nutzt fortgeschrittene Algorithmen, maschinelles Lernen und prÃ¤diktive Analytik zur Automatisierung, Optimierung und Verbesserung von Finanzmanagementprozessen im EPM-Rahmen.",
    
    "ki epm vorteile": "Vorteile: Prozessautomatisierung (30-50% Zeitreduktion), prÃ¤zisere Prognosen (+15-25%), Echtzeit-Anomalieerkennung, kontinuierliche Optimierung, weniger menschliche Fehler.",
    "ki vorteile finanzen": "Vorteile: Prozessautomatisierung (30-50% Zeitreduktion), prÃ¤zisere Prognosen (+15-25%), Echtzeit-Anomalieerkennung, kontinuierliche Optimierung, weniger menschliche Fehler."
  }
};

// Suggestions de questions frÃ©quentes par thÃ¨me
const quickQuestions = {
  fr: [
    "Qu'est-ce que l'IA en finance ?",
    "Quels sont les avantages de l'IA pour l'EPM ?",
    "Comment intÃ©grer l'IA dans mon systÃ¨me ?",
    "Quel est le ROI de l'IA en finance ?",
    "Quelles technologies IA utilisez-vous ?",
    "Combien coÃ»te une implÃ©mentation IA ?",
    "L'IA peut-elle aider pour les prÃ©visions ?",
    "Comment assurer la sÃ©curitÃ© des donnÃ©es ?",
    "Quels processus peuvent Ãªtre automatisÃ©s ?",
    "Comment former les Ã©quipes Ã  l'IA ?"
  ],
  en: [
    "What is AI in finance?",
    "What are the benefits of AI for EPM?",
    "How to integrate AI in my system?",
    "What is the ROI of AI in finance?",
    "What AI technologies do you use?",
    "How much does AI implementation cost?",
    "Can AI help with forecasting?",
    "How to ensure data security?",
    "Which processes can be automated?",
    "How to train teams on AI?"
  ],
  de: [
    "Was ist KI im Finanzwesen?",
    "Was sind die Vorteile von KI fÃ¼r EPM?",
    "Wie integriere ich KI in mein System?",
    "Was ist der ROI von KI im Finanzwesen?",
    "Welche KI-Technologien verwenden Sie?",
    "Wie viel kostet eine KI-Implementierung?",
    "Kann KI bei Prognosen helfen?",
    "Wie stelle ich Datensicherheit sicher?",
    "Welche Prozesse kÃ¶nnen automatisiert werden?",
    "Wie schule ich Teams fÃ¼r KI?"
  ]
};

// Fonction de recherche intelligente dans la FAQ
function searchFAQ(query, lang = 'fr') {
  const faqLang = faq[lang] || faq.fr;
  const normalizedQuery = query.toLowerCase()
    .replace(/[Ã Ã¡Ã¢Ã£Ã¤Ã¥]/g, 'a')
    .replace(/[Ã¨Ã©ÃªÃ«]/g, 'e')
    .replace(/[Ã¬Ã­Ã®Ã¯]/g, 'i')
    .replace(/[Ã²Ã³Ã´ÃµÃ¶]/g, 'o')
    .replace(/[Ã¹ÃºÃ»Ã¼]/g, 'u')
    .replace(/[Ã§]/g, 'c')
    .replace(/[^a-z0-9\s]/g, ' ')
    .trim();

  // Recherche par mots-clÃ©s
  const keywords = normalizedQuery.split(' ').filter(word => word.length > 2);
  let bestMatch = null;
  let maxScore = 0;

  for (const [key, value] of Object.entries(faqLang)) {
    let score = 0;
    const normalizedKey = key.toLowerCase();
    const normalizedValue = value.toLowerCase();

    // Score basÃ© sur la correspondance des mots-clÃ©s
    keywords.forEach(keyword => {
      if (normalizedKey.includes(keyword)) score += 3;
      if (normalizedValue.includes(keyword)) score += 1;
    });

    // Bonus pour correspondance exacte
    if (normalizedKey.includes(normalizedQuery)) score += 5;

    if (score > maxScore) {
      maxScore = score;
      bestMatch = { key, value, score };
    }
  }

  return maxScore > 2 ? bestMatch : null;
}
