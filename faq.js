// faq.js - Base de connaissances compl√®te IA & Performance Financi√®re EPM

const faq = {
  fr: {
    // Messages syst√®me
    welcome: "Bonjour üëã Je suis le chatbot Helvitic AI sp√©cialis√© en IA pour la performance financi√®re. Posez-moi vos questions sur l'EPM, l'automatisation ou nos solutions.",
    greeting: "Bonjour! Comment puis-je vous aider avec l'IA en finance ?",
    services: "Nous offrons des solutions IA pour l'EPM : pr√©visions automatis√©es, budgeting intelligent, d√©tection d'anomalies, et optimisation des processus financiers.",
    contact: "Vous pouvez nous contacter via email : helviticaich@gmail.com ou par t√©l√©phone +41 22 123 45 67",
    goodbye: "Merci pour votre int√©r√™t ! N'h√©sitez pas √† nous recontacter pour vos projets IA & Finance üëã",
    unknown: "Je n'ai pas trouv√© d'information sur ce sujet. Pouvez-vous reformuler ou poser une question sur l'IA en finance, l'EPM, ou nos solutions ?",

    // Base de connaissances IA & Finance
    "qu'est-ce que l'ia en finance": "L'IA appliqu√©e √† la performance financi√®re consiste √† utiliser des algorithmes avanc√©s, l'apprentissage automatique et l'analyse pr√©dictive pour automatiser, optimiser et am√©liorer les processus de gestion financi√®re dans le cadre de l'EPM.",
    "ia finance definition": "L'IA appliqu√©e √† la performance financi√®re consiste √† utiliser des algorithmes avanc√©s, l'apprentissage automatique et l'analyse pr√©dictive pour automatiser, optimiser et am√©liorer les processus de gestion financi√®re dans le cadre de l'EPM.",
    
    "avantages ia epm": "Les avantages incluent : automatisation des processus (r√©duction 30-50% du temps), pr√©visions plus pr√©cises (+15-25%), d√©tection d'anomalies en temps r√©el, optimisation continue, et r√©duction des erreurs humaines.",
    "benefices ia finance": "Les avantages incluent : automatisation des processus (r√©duction 30-50% du temps), pr√©visions plus pr√©cises (+15-25%), d√©tection d'anomalies en temps r√©el, optimisation continue, et r√©duction des erreurs humaines.",
    
    "ia planification financiere": "L'IA transforme la planification via des mod√®les pr√©dictifs sophistiqu√©s, simulation de sc√©narios multiples en temps r√©el, int√©gration automatique de variables externes, g√©n√©ration automatique de budgets/forecasts.",
    "planning financier ia": "L'IA transforme la planification via des mod√®les pr√©dictifs sophistiqu√©s, simulation de sc√©narios multiples en temps r√©el, int√©gration automatique de variables externes, g√©n√©ration automatique de budgets/forecasts.",
    
    "processus epm automatisables": "Processus automatisables : consolidation financi√®re, reporting automatis√©, budgeting/forecasting, analyse de variance, allocation des co√ªts, contr√¥le de gestion, r√©conciliation des donn√©es.",
    "automatisation epm": "Processus automatisables : consolidation financi√®re, reporting automatis√©, budgeting/forecasting, analyse de variance, allocation des co√ªts, contr√¥le de gestion, r√©conciliation des donn√©es.",
    
    "precision previsions ia": "L'IA am√©liore la pr√©cision des pr√©visions gr√¢ce √† l'analyse de patterns complexes, int√©gration de variables externes (indicateurs √©conomiques, saisonnalit√©), apprentissage continu qui affine les mod√®les.",
    "forecasting ia": "L'IA am√©liore la pr√©cision des pr√©visions gr√¢ce √† l'analyse de patterns complexes, int√©gration de variables externes (indicateurs √©conomiques, saisonnalit√©), apprentissage continu qui affine les mod√®les.",
    
    "ia analyse risques": "Oui, l'IA excelle dans l'analyse des risques : d√©tection automatique d'anomalies, √©valuation de probabilit√©s de sc√©narios, surveillance continue des seuils critiques, alertes pr√©ventives automatiques.",
    "risk management ia": "Oui, l'IA excelle dans l'analyse des risques : d√©tection automatique d'anomalies, √©valuation de probabilit√©s de sc√©narios, surveillance continue des seuils critiques, alertes pr√©ventives automatiques.",
    
    "integration ia epm": "L'int√©gration se fait en 6 √©tapes : 1) Audit des donn√©es 2) D√©finition des cas d'usage 3) S√©lection des outils 4) Phase pilote 5) D√©ploiement progressif 6) Formation des √©quipes.",
    "comment integrer ia": "L'int√©gration se fait en 6 √©tapes : 1) Audit des donn√©es 2) D√©finition des cas d'usage 3) S√©lection des outils 4) Phase pilote 5) D√©ploiement progressif 6) Formation des √©quipes.",
    
    "prerequis techniques ia": "Pr√©requis : infrastructure cloud/on-premise suffisante, donn√©es propres et coh√©rentes, APIs pour int√©gration, s√©curit√© renforc√©e, comp√©tences IA/data science, gouvernance claire.",
    "prerequis ia finance": "Pr√©requis : infrastructure cloud/on-premise suffisante, donn√©es propres et coh√©rentes, APIs pour int√©gration, s√©curit√© renforc√©e, comp√©tences IA/data science, gouvernance claire.",
    
    "delais resultats ia": "Premiers r√©sultats : 2-3 mois (d√©tection anomalies), 4-6 mois (automatisation processus), 6-12 mois (mod√®les pr√©dictifs), 12-24 mois (transformation compl√®te EPM).",
    "timeline ia implementation": "Premiers r√©sultats : 2-3 mois (d√©tection anomalies), 4-6 mois (automatisation processus), 6-12 mois (mod√®les pr√©dictifs), 12-24 mois (transformation compl√®te EPM).",
    
    "technologies ia finance": "Technologies cl√©s : Machine Learning, Deep Learning, Natural Language Processing, Computer Vision, RPA (Robotic Process Automation), IA g√©n√©rative pour cr√©ation de contenu.",
    "outils ia epm": "Technologies cl√©s : Machine Learning, Deep Learning, Natural Language Processing, Computer Vision, RPA (Robotic Process Automation), IA g√©n√©rative pour cr√©ation de contenu.",
    
    "solutions epm ia existantes": "Solutions avec IA int√©gr√©e : Oracle EPM Cloud (pr√©dictif avanc√©), SAP Analytics Cloud (IA planning), IBM Planning Analytics (analyse cognitive), Microsoft Power BI, Workday Adaptive Planning.",
    "logiciels epm ia": "Solutions avec IA int√©gr√©e : Oracle EPM Cloud (pr√©dictif avanc√©), SAP Analytics Cloud (IA planning), IBM Planning Analytics (analyse cognitive), Microsoft Power BI, Workday Adaptive Planning.",
    
    "roi ia finance": "ROI attendu : 200-400% sur 3 ans. Gains typiques : +30-50% productivit√©, +15-25% pr√©cision pr√©visions, -20-35% co√ªts processus, -40-60% d√©lais de cl√¥ture.",
    "retour investissement ia": "ROI attendu : 200-400% sur 3 ans. Gains typiques : +30-50% productivit√©, +15-25% pr√©cision pr√©visions, -20-35% co√ªts processus, -40-60% d√©lais de cl√¥ture.",
    
    "cout implementation ia": "Co√ªts variables selon scope : solutions simples 50-100K‚Ç¨, projets moyens 200-500K‚Ç¨, transformation compl√®te 500K-2M‚Ç¨. ROI g√©n√©ralement atteint en 18-24 mois.",
    "prix solution ia": "Co√ªts variables selon scope : solutions simples 50-100K‚Ç¨, projets moyens 200-500K‚Ç¨, transformation compl√®te 500K-2M‚Ç¨. ROI g√©n√©ralement atteint en 18-24 mois.",
    
    "securite donnees ia": "S√©curit√© renforc√©e : chiffrement bout-en-bout, acc√®s bas√© sur les r√¥les, audit trails complets, conformit√© RGPD, h√©bergement s√©curis√© (Swiss hosting disponible), anonymisation des donn√©es sensibles.",
    "data security ia": "S√©curit√© renforc√©e : chiffrement bout-en-bout, acc√®s bas√© sur les r√¥les, audit trails complets, conformit√© RGPD, h√©bergement s√©curis√© (Swiss hosting disponible), anonymisation des donn√©es sensibles.",
    
    "formation equipes ia": "Formation requise : sensibilisation concepts IA, cas d'usage financiers concrets, manipulation outils pratiques, interpr√©tation des r√©sultats IA, bonnes pratiques gouvernance, formation continue.",
    "training ia finance": "Formation requise : sensibilisation concepts IA, cas d'usage financiers concrets, manipulation outils pratiques, interpr√©tation des r√©sultats IA, bonnes pratiques gouvernance, formation continue.",
    
    "ia remplace controleurs": "Non, l'IA ne remplace pas les contr√¥leurs de gestion : elle √©limine les t√¢ches r√©p√©titives, lib√®re du temps pour l'analyse, renforce leur r√¥le de conseil strat√©gique et d'interpr√©tation des insights IA.",
    "remplacement emplois ia": "Non, l'IA ne remplace pas les contr√¥leurs de gestion : elle √©limine les t√¢ches r√©p√©titives, lib√®re du temps pour l'analyse, renforce leur r√¥le de conseil strat√©gique et d'interpr√©tation des insights IA.",
    
    "tendances ia epm": "Tendances √©mergentes : IA g√©n√©rative (cr√©ation rapports automatiques), real-time analytics, d√©mocratisation outils IA, IA explicable (transparence), edge computing, int√©gration crit√®res ESG.",
    "futur ia finance": "Tendances √©mergentes : IA g√©n√©rative (cr√©ation rapports automatiques), real-time analytics, d√©mocratisation outils IA, IA explicable (transparence), edge computing, int√©gration crit√®res ESG."
  },

  en: {
    welcome: "Hello üëã I'm the Helvitic AI chatbot specialized in AI for financial performance. Ask me about EPM, automation, or our solutions.",
    greeting: "Hello! How can I help you with AI in finance?",
    services: "We provide AI solutions for EPM: automated forecasting, intelligent budgeting, anomaly detection, and financial process optimization.",
    contact: "You can reach us via email: helviticaich@gmail.com or phone +41 22 123 45 67",
    goodbye: "Thank you for your interest! Feel free to contact us again for your AI & Finance projects üëã",
    unknown: "I couldn't find information on this topic. Could you rephrase or ask about AI in finance, EPM, or our solutions?",

    "what is ai in finance": "AI in financial performance uses advanced algorithms, machine learning and predictive analytics to automate, optimize and improve financial management processes within EPM frameworks.",
    "ai finance definition": "AI in financial performance uses advanced algorithms, machine learning and predictive analytics to automate, optimize and improve financial management processes within EPM frameworks.",
    
    "ai epm benefits": "Benefits include: process automation (30-50% time reduction), more accurate forecasts (+15-25%), real-time anomaly detection, continuous optimization, and reduced human errors.",
    "ai finance advantages": "Benefits include: process automation (30-50% time reduction), more accurate forecasts (+15-25%), real-time anomaly detection, continuous optimization, and reduced human errors.",
    
    "ai financial planning": "AI transforms planning through sophisticated predictive models, real-time multi-scenario simulation, automatic integration of external variables, automated budget/forecast generation.",
    "financial planning ai": "AI transforms planning through sophisticated predictive models, real-time multi-scenario simulation, automatic integration of external variables, automated budget/forecast generation.",
    
    "ai integration epm": "Integration in 6 steps: 1) Data audit 2) Use case definition 3) Tool selection 4) Pilot phase 5) Progressive deployment 6) Team training.",
    "how to integrate ai": "Integration in 6 steps: 1) Data audit 2) Use case definition 3) Tool selection 4) Pilot phase 5) Progressive deployment 6) Team training.",
    
    "ai finance roi": "Expected ROI: 200-400% over 3 years. Typical gains: +30-50% productivity, +15-25% forecast accuracy, -20-35% process costs, -40-60% closing time.",
    "return on investment ai": "Expected ROI: 200-400% over 3 years. Typical gains: +30-50% productivity, +15-25% forecast accuracy, -20-35% process costs, -40-60% closing time."
  },

  de: {
    welcome: "Hallo üëã Ich bin der Helvitic AI Chatbot f√ºr KI in der Finanzperformance. Fragen Sie mich zu EPM, Automatisierung oder unseren L√∂sungen.",
    greeting: "Hallo! Wie kann ich Ihnen mit KI im Finanzwesen helfen?",
    services: "Wir bieten KI-L√∂sungen f√ºr EPM: automatisierte Prognosen, intelligente Budgetierung, Anomalieerkennung und Optimierung von Finanzprozessen.",
    contact: "Sie erreichen uns per E-Mail: helviticaich@gmail.com oder Telefon +41 22 123 45 67",
    goodbye: "Vielen Dank f√ºr Ihr Interesse! Kontaktieren Sie uns gerne f√ºr Ihre KI & Finance Projekte üëã",
    unknown: "Ich konnte keine Information zu diesem Thema finden. K√∂nnen Sie umformulieren oder zu KI im Finanzwesen, EPM oder unseren L√∂sungen fragen?",

    "was ist ki in finanzen": "KI in der Finanzperformance nutzt fortgeschrittene Algorithmen, maschinelles Lernen und pr√§diktive Analytik zur Automatisierung, Optimierung und Verbesserung von Finanzmanagementprozessen im EPM-Rahmen.",
    "ki finanzen definition": "KI in der Finanzperformance nutzt fortgeschrittene Algorithmen, maschinelles Lernen und pr√§diktive Analytik zur Automatisierung, Optimierung und Verbesserung von Finanzmanagementprozessen im EPM-Rahmen.",
    
    "ki epm vorteile": "Vorteile: Prozessautomatisierung (30-50% Zeitreduktion), pr√§zisere Prognosen (+15-25%), Echtzeit-Anomalieerkennung, kontinuierliche Optimierung, weniger menschliche Fehler.",
    "ki vorteile finanzen": "Vorteile: Prozessautomatisierung (30-50% Zeitreduktion), pr√§zisere Prognosen (+15-25%), Echtzeit-Anomalieerkennung, kontinuierliche Optimierung, weniger menschliche Fehler."
  }
};

// Suggestions de questions fr√©quentes par th√®me
const quickQuestions = {
  fr: [
    "Qu'est-ce que l'IA en finance ?",
    "Quels sont les avantages de l'IA pour l'EPM ?",
    "Comment int√©grer l'IA dans mon syst√®me ?",
    "Quel est le ROI de l'IA en finance ?",
    "Quelles technologies IA utilisez-vous ?",
    "Combien co√ªte une impl√©mentation IA ?",
    "L'IA peut-elle aider pour les pr√©visions ?",
    "Comment assurer la s√©curit√© des donn√©es ?",
    "Quels processus peuvent √™tre automatis√©s ?",
    "Comment former les √©quipes √† l'IA ?"
  ],
  en: [
    "What is AI in finance?",
    "What are the benefits of AI for EPM?",
    "How to integrate AI in my system?",
    "What is the ROI of AI in finance?",
    "What AI technologies do you use?",
    "How much does AI implementation cost?",
    "Can AI help with forecasting?",
    "How to ensure data security?",
    "Which processes can be automated?",
    "How to train teams on AI?"
  ],
  de: [
    "Was ist KI im Finanzwesen?",
    "Was sind die Vorteile von KI f√ºr EPM?",
    "Wie integriere ich KI in mein System?",
    "Was ist der ROI von KI im Finanzwesen?",
    "Welche KI-Technologien verwenden Sie?",
    "Wie viel kostet eine KI-Implementierung?",
    "Kann KI bei Prognosen helfen?",
    "Wie stelle ich Datensicherheit sicher?",
    "Welche Prozesse k√∂nnen automatisiert werden?",
    "Wie schule ich Teams f√ºr KI?"
  ]
};

// Fonction de recherche intelligente dans la FAQ
function searchFAQ(query, lang = 'fr') {
  const faqLang = faq[lang] || faq.fr;
  const normalizedQuery = query.toLowerCase()
    .replace(/[√†√°√¢√£√§√•]/g, 'a')
    .replace(/[√®√©√™√´]/g, 'e')
    .replace(/[√¨√≠√Æ√Ø]/g, 'i')
    .replace(/[√≤√≥√¥√µ√∂]/g, 'o')
    .replace(/[√π√∫√ª√º]/g, 'u')
    .replace(/[√ß]/g, 'c')
    .replace(/[^a-z0-9\s]/g, ' ')
    .trim();

  // Recherche par mots-cl√©s
  const keywords = normalizedQuery.split(' ').filter(word => word.length > 2);
  let bestMatch = null;
  let maxScore = 0;

  for (const [key, value] of Object.entries(faqLang)) {
    let score = 0;
    const normalizedKey = key.toLowerCase();
    const normalizedValue = value.toLowerCase();

    // Score bas√© sur la correspondance des mots-cl√©s
    keywords.forEach(keyword => {
      if (normalizedKey.includes(keyword)) score += 3;
      if (normalizedValue.includes(keyword)) score += 1;
    });

    // Bonus pour correspondance exacte
    if (normalizedKey.includes(normalizedQuery)) score += 5;

    if (score > maxScore) {
      maxScore = score;
      bestMatch = { key, value, score };
    }
  }

  return maxScore > 2 ? bestMatch : null;
}
